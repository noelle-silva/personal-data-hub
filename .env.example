# ============================================================
# Personal Data Hub - Unified .env Example
#
# 用法：
# 1) 复制本文件为 `.env`
# 2) 按需修改配置
#
# 兼容性：
# - 新版本后端会优先读取根目录 `.env`
# - 同时仍兼容旧的 `backend/db.env`、`port.env`、`file.env`、`login.env`
# ============================================================

# =========================
# MongoDB（原 backend/db.env）
# =========================

# MongoDB 数据库连接字符串
MONGODB_URI=mongodb://username:password@localhost:27017/personal-data-hub?authSource=admin

# MongoDB 集合名称（可选）
DOCUMENT_COLLECTION=documents
QUOTE_COLLECTION=quotes
ATTACHMENT_COLLECTION=attachments
CUSTOM_PAGE_COLLECTION=custom-pages

# AI 相关集合（可选）
AI_PROMPTS_COLLECTION=AI-prompts
AI_ROLES_COLLECTION=AI-roles
AI_CHAT_HISTORY_COLLECTION=ai-chat-history


# =========================
# 服务端口与运行环境（原 port.env）
# =========================
BACKEND_PORT=5000
NODE_ENV=development


# =========================
# 附件系统（原 file.env）
# =========================

# 存储路径（支持绝对路径或相对项目根目录的相对路径）
ATTACHMENTS_IMAGE_DIR=backend/attachments/images
ATTACHMENTS_VIDEO_DIR=backend/attachments/videos
ATTACHMENTS_FILE_DIR=backend/attachments/document-file
ATTACHMENTS_SCRIPT_DIR=backend/attachments/scripts

# 图片上传限制
ATTACHMENTS_MAX_IMAGE_SIZE=10485760
ATTACHMENTS_ALLOWED_IMAGE_TYPES=image/png,image/jpeg,image/webp,image/gif

# 视频上传限制
ATTACHMENTS_MAX_VIDEO_SIZE=1073741824
ATTACHMENTS_ALLOWED_VIDEO_TYPES=video/mp4,video/webm,video/ogg,video/quicktime,video/x-msvideo,video/x-matroska,video/x-flv

# 文档上传限制
ATTACHMENTS_MAX_DOCUMENT_SIZE=52428800
ATTACHMENTS_ALLOWED_DOCUMENT_TYPES=application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document,text/plain,application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation,application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/epub+zip,application/epub

# 程序与脚本上传限制
ATTACHMENTS_MAX_SCRIPT_SIZE=10485760
ATTACHMENTS_ALLOWED_SCRIPT_TYPES=text/x-python,application/x-msdos-program,text/x-shellscript,application/javascript,text/x-c++src,application/x-msdownload,text/javascript

# 去重策略（true/false）
ATTACHMENTS_ENABLE_DEDUPLICATION=false

# 缓存（秒）
ATTACHMENTS_CACHE_TTL=3600

# 临时文件目录（用于大文件上传）
ATTACHMENTS_TMP_DIR=backend/attachments/tmp

# Range 支持（用于视频分段加载）
ATTACHMENTS_ENABLE_RANGE=true

# 多文件上传数量限制（按类别）
ATTACHMENTS_MAX_IMAGE_FILES=10
ATTACHMENTS_MAX_VIDEO_FILES=3
ATTACHMENTS_MAX_DOCUMENT_FILES=10
ATTACHMENTS_MAX_SCRIPT_FILES=10


# =========================
# 登录认证（原 login.env）
# =========================

LOGIN_USERNAME=admin
LOGIN_PASSWORD_HASH=your-bcrypt-password-hash-here

JWT_SECRET=your-jwt-secret-key-change-this-in-production
JWT_EXPIRES_IN=24h

# 管理员用户ID（24位十六进制 ObjectId 字符串）
ADMIN_USER_ID=000000000000000000000001

# 登录限流（桌面端默认建议关闭）
# LOGIN_RATE_LIMIT_ENABLED=true

